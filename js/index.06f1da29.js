(function(){"use strict";var t={7087:function(t,e,i){var s=i(6369),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[t.$store.state.isLoading?e("LoaderGlobal"):e("div",[e("button",{staticClass:"app_header-refresh",on:{click:t.clearStore}},[t._v(" Сбросить состояния приложения ")]),e("div",{staticClass:"container block_with_effect",class:t.$store.state.isLoading?"":"active"},[e("TheCategories"),t.isShowModalRemove?e("ModalRemove"):t._e(),t.isShowModalDefault?e("ModalDefault"):t._e()],1)])],1)},o=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"categories"},[e("HeaderPageCategories"),e("div",{staticClass:"categories-content"},[t.$store.state.categories[0]?e("div",[t._l(t.categories.slice(t.start,t.end),(function(t,i){return e("Category",{key:t.id,attrs:{category:t,index:i}})})),t.isShowPagination?e("PaginationCategories",{attrs:{onChange:t.onChangePagination,countCategories:t.categories.length}}):t._e()],2):e("div",[e("CategoriesEmpty")],1)])],1)},n=[],l=function(){var t=this,e=t._self._c;return e("header",{staticClass:"app_header"},[e("div",{staticClass:"app_header-container"},[e("div",{staticClass:"app_header-left"},[e("ButtonPrimary",{staticClass:"app_header-left-btn",attrs:{onClick:t.onCreateCategory}},[t._t("default",(function(){return[t._v("Создать категорию")]}))],2)],1),e("div",{staticClass:"app_header-search"},[e("SearchCategories")],1)])])},c=[],u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search_categories"},[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.searchStr,expression:"searchStr",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:t.delay,expression:"delay"}],staticClass:"search_categories-input input",attrs:{placeholder:"Найти статью"},domProps:{value:t.searchStr},on:{change:function(e){t.searchStr=e.target.value}}}),e("button",{staticClass:"btn btn-icon search_categories-clear",on:{click:t.clear}}),e("button",{staticClass:"btn btn-icon search_categories-magnifier"})])},d=[],h=i(3783),g=i.n(h),m=i(3822),p={name:"SearchCategories",data(){return{searchStr:null,delay:600}},directives:{debounce:h.directive},watch:{searchStr(t){this.setFilterArticles(t)}},methods:{...(0,m.nv)(["setFilterArticles"]),clear(){this.searchStr=null}}},f=p,v=i(1001),C=(0,v.Z)(f,u,d,!1,null,null,null),y=C.exports,b=function(){var t=this,e=t._self._c;return e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.onClick()}}},[e("div",{staticClass:"btn-primary-container"},[e("span",{staticClass:"btn-primary-text"},[t._t("default")],2),e("img",{staticClass:"btn-primary-plus",attrs:{src:"https://klavrenuk.github.io/min-article-book/images1/plus.svg",alt:"Plus"}})])])},_=[],k={name:"ButtonPrimary",props:{onClick:{type:Function,required:!1}}},w=k,S=(0,v.Z)(w,b,_,!1,null,"749da86a",null),O=S.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category_modal_body"},[t.isShowForm?e("form",[e("div",{staticClass:"form-group"},[e("CustomInput",{attrs:{label:"Название",onChange:t.onChangeName,defaultValue:t.category.name,invalid:t.invalid}})],1),e("div",{staticClass:"form-group"},[e("CustomSelect",{attrs:{settings:t.settingsParentCategory,listOptions:t.parentCategories,onSelected:t.onSelected}})],1),e("div",{staticClass:"from-group"},[e("SelectWithSearch",{attrs:{settings:t.articleSettings,options:t.articlesFree,onSelect:t.onSelected}}),e("ListSelectedItems",{attrs:{onRemove:t.onRemoveSelectedItem,items:t.selectedArticles}})],1)]):t._e()])},x=[],A=(i(7658),function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"select_with_search custom_select"},[e("div",{staticClass:"select_with_search-header"},[e("label",{staticClass:"select_with_search-header-label",class:{active:t.searchStr||t.isShowOptions},on:{click:t.showOptions}},[t._v(t._s(t.settings.label))]),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.searchStr,expression:"searchStr",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:t.delay,expression:"delay"}],staticClass:"select_with_search-header-input input",domProps:{value:t.searchStr},on:{click:function(e){return t.showOptions()},input:function(e){return t.showOptions()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onEsc(e)},change:function(e){t.searchStr=e.target.value}}})]),t.isShowOptions?e("ul",{staticClass:"select_with_search-list custom_select-list"},[e("li",{staticClass:"custom_select-list-item"},t._l(t.filteredOptions,(function(i){return e("button",{key:i.id,staticClass:"custom_select-list-item-btn btn-empty",attrs:{type:"button"},on:{click:function(e){return t.onSelectedOption(i)}}},[t._v(" "+t._s(i.name)+" ")])})),0)]):t._e()])}),P=[],M={name:"SelectWithSearch",props:{settings:{type:Object,required:!1},options:{type:Array,required:!0},onSelect:{type:Function,required:!1}},directives:{debounce:h.directive},data(){return{isShowOptions:!1,searchStr:null,delay:600,filteredOptions:[]}},watch:{searchStr(t){this.filterOptions(t)},options(){this.filteredOptions=this.options.slice()}},methods:{onEsc(t){t.target.blur(),this.isShowOptions=!1},onSelectedOption(t){this.searchStr=null,this.onSelect(this.settings.key,t),this.isShowOptions=!1},showOptions(){this.isShowOptions=!0},onClickOutside(){this.isShowOptions=!1},filterOptions(t){this.filteredOptions=t?this.options.filter((e=>{if(e.name.toLowerCase().search(t.toLowerCase())>-1)return e})):this.options.slice()}},mounted(){this.filteredOptions=this.options.slice()}},I=M,L=(0,v.Z)(I,A,P,!1,null,"7952f1b2",null),R=L.exports,N=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"list_selected_items"},t._l(t.items,(function(i,s){return e("li",{key:i.id,staticClass:"selected_item"},[e("button",{staticClass:"selected_item-remove btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.onRemove(s)}}},[t._m(0,!0)]),e("span",{staticClass:"selected_item-name"},[t._v(t._s(i.name))])])})),0)},V=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"selected_item-remove-container"},[e("img",{attrs:{src:"https://klavrenuk.github.io/min-article-book/images1/icon-trash.svg",alt:"Иконка удаления"}})])}],q={name:"RowSelectedCategories",props:{items:{type:Array,required:!1},onRemove:{type:Function,required:!0}}},F=q,Z=(0,v.Z)(F,N,V,!1,null,"68fb6a3e",null),T=Z.exports,E=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"custom_select"},[e("button",{staticClass:"custom_select-button_top btn btn-empty",attrs:{type:"button"},on:{click:t.toggleView,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onEsc()}}},[t.settings.isHideLabel?t._e():e("label",{staticClass:"button_top-label",class:{active:t.selectedItem}},[t._v(t._s(t.settings.label))]),"default"===t.type?e("span",{staticClass:"button_top-text"},[t._v(" "+t._s(t.selectedItem&&!t.settings.isShowOnlyLabel?t.selectedItem:"")+" ")]):t._e(),e("i",{staticClass:"button_top-icon"})]),t.isShowOptions?e("ul",{staticClass:"custom_select-list"},t._l(t.listOptions,(function(i,s){return e("li",{key:`${i}-${s}`,staticClass:"custom_select-list-item",on:{click:function(e){return t.onSelect(i)}}},[e("button",{staticClass:"custom_select-list-item-btn btn btn-empty",class:{active:t.isActiveOption(i.id)}},[t._v(" "+t._s(i.name)+" ")])])})),0):t._e()])},j=[],B={name:"CustomSelect",props:{settings:{type:Object,required:!0},onSelected:{type:Function,required:!1},listOptions:{type:Array,required:!0},type:{type:String,required:!1,default:"default"},selectedDefault:{type:Array,required:!1}},data(){return{isShowOptions:!1,selectedItem:null,selectedList:[],selectedListIds:[]}},methods:{onEsc(){this.isShowOptions=!1},onClickOutside(){this.isShowOptions=!1},toggleView(){this.isShowOptions=!this.isShowOptions},isActiveOption(t){const e=this.selectedListIds.indexOf(t);return e>-1},onSelect(t){this.toggleView(),this.selectedItem=t.name,this.onSelected&&this.onSelected(this.settings.key,t)}},mounted(){Array.isArray(this.selectedDefault)&&(this.selectedList=this.selectedDefault.slice(),this.selectedListIds=this.selectedDefault.map((t=>t.id))),this.settings&&this.settings.selectedItem&&(this.selectedItem=this.settings.selectedItem)}},$=B,z=(0,v.Z)($,E,j,!1,null,"4ac93738",null),H=z.exports,W=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"custom_input",class:t.invalid?"invalid":""},[e("label",{staticClass:"custom_input-label",class:{active:t.isActiveLabel},on:{click:function(e){return t.onFocus()}}},[t._v(" "+t._s(t.label)+" ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"RefInput",staticClass:"input custom_input-input",class:{active:t.isActiveLabel},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},function(e){return t.onChangeValue()}],click:function(e){return t.onClickInput()},blur:function(e){return t.toggleView()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onEsc(e)}}}),t.invalid?e("label",{staticClass:"custom_input-message"},[t._v(t._s(t.invalid.message))]):t._e()])},G=[],J={name:"CustomInput",props:{label:{type:String,required:!0},onChange:{type:Function,required:!0},defaultValue:{type:String,required:!1,default:null},invalid:{type:Object,required:!1}},data(){return{value:null,isActiveLabel:!1}},methods:{onChangeValue(){this.onChange(this.value),null!==this.value&&(this.isActiveLabel=!0)},onFocus(){this.$refs.RefInput.focus(),this.isActiveLabel=!0},onClickOutside(){this.toggleView()},onClickInput(){this.isActiveLabel=!0},toggleView(){!this.value||this.value&&!this.value.trim()?this.isActiveLabel=!1:this.isActiveLabel=!0},onEsc(t){t.target.blur(),this.toggleView()}},mounted(){this.value=this.defaultValue,this.toggleView()}},U=J,K=(0,v.Z)(U,W,G,!1,null,"345847a8",null),Q=K.exports,X={name:"CategoryModalBody",components:{CustomSelect:H,SelectWithSearch:R,ListSelectedItems:T,CustomInput:Q},data(){return{invalid:null,category:{},isShowForm:!1,selectedArticles:[],articleSettings:{label:"Вложенные статьи",key:"article"},settingsParentCategory:{label:"Родительская категория (необязательно)",key:"parent",selectedItem:null},articlesFree:[],parentCategories:[]}},computed:{...(0,m.Se)(["modalDefault"])},watch:{"$store.state.isValidModalItem":function(t){if(this.invalid=null,t&&Array.isArray(t))for(let e of t)"name"===e.key&&(this.invalid={message:e.message,isValid:!1})}},methods:{...(0,m.nv)(["addCategory","editCategory","setModalState"]),onChangeName(t){this.category.name=t,this.updateStore()},onSelected(t,e){switch(t){case"article":this.selectedArticles.push(e),this.setArticleFree();break;case"parent":this.category.parent=e.id;break;default:this.category[t]=e;break}this.updateStore()},onRemoveSelectedItem(t){this.selectedArticles.splice(t,1),this.setArticleFree(),this.updateStore()},setArticleFree(){this.articlesFree=this.$store.state.articles.filter((t=>{let e=!1;for(let i of this.selectedArticles)i.id===t.id&&(e=!0);if(!e)return t}))},updateStore(){this.setModalState({articleSelected:this.selectedArticles,category:{...this.category}})},getCategory(t){if(t.subCategories){this.category.id!==t.id&&this.parentCategories.push(t);for(let e of t.subCategories)this.getCategory(e,t)}else this.category.id!==t.id&&this.parentCategories.push(t)},setParentCategories(){this.parentCategories=[];for(let t of this.$store.state.categories)this.getCategory(t)}},mounted(){this.modalDefault.category&&this.modalDefault.category.id&&(this.category={...this.modalDefault.category,index:this.modalDefault.categoryIndex},this.selectedArticles=this.modalDefault.category.articles.slice(),this.modalDefault.parent&&(this.settingsParentCategory.selectedItem=this.modalDefault.parent.name)),this.setArticleFree(),this.setParentCategories(),this.updateStore(),setTimeout((()=>{this.isShowForm=!0}),0)}},Y=X,tt=(0,v.Z)(Y,D,x,!1,null,"723befe6",null),et=tt.exports,it={name:"HeaderPageCategories",components:{SearchCategories:y,ButtonPrimary:O},methods:{...(0,m.nv)(["showModalDefault","addCategory"]),onCreateCategory(){this.showModalDefault({title:"Новая категория",save:this.addCategory,content:et})}}},st=it,at=(0,v.Z)(st,l,c,!1,null,"c864cf74",null),ot=at.exports,rt=function(){var t=this,e=t._self._c;return e("section",{staticClass:"category"},[e("div",{staticClass:"category-header"},[e("button",{staticClass:"btn btn-empty wrap-category-title",on:{click:function(e){return t.toggleView()}}},[e("h3",{staticClass:"category-title"},[t._v(" "+t._s(t.category.name)+" "),e("span",{staticClass:"category-title-count"},[t._v("("+t._s(t.category.articles.length)+")")])])]),e("div",{staticClass:"category-header-control"},[e("button",{staticClass:"btn btn-icon btn_toggle_view",class:t.isShowArticles?"":"close",on:{click:function(e){return t.toggleView()}}}),e("button",{staticClass:"btn btn-icon btn_options",on:{click:function(e){return t.toggleViewOptions()}}}),t.isShowListOptions?e("ListOptions",{attrs:{options:t.controlOptions,onSelectOption:t.onSelectOption,toggleViewOptions:t.toggleViewOptions}}):t._e()],1)]),t.isShowArticles?e("div",[e("ul",{staticClass:"category-list"},t._l(t.category.articles,(function(t){return e("li",{key:t.id,staticClass:"category-list-item"},[e("CategoryArticleCard",{attrs:{article:t}})],1)})),0),e("div",{staticClass:"category-subcategories"},[e("ul",{staticClass:"subcategories-list"},t._l(t.category.subCategories,(function(i){return e("li",{key:i.id},[e("CardCategory",{attrs:{category:i,isShowDefaultArticles:!1,parent:t.category}})],1)})),0)])]):t._e()])},nt=[],lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category_article_card"},[e("div",{staticClass:"category_article_card-top"},[e("BlockLikes",{attrs:{likes:t.article.likes}}),e("button",{staticClass:"btn btn-icon category_article_card-top-edit",on:{click:function(e){return t.onEditArticle()}}})],1),e("div",{staticClass:"category_article_card-wrap_img"},[e("img",{attrs:{src:t.article.img,alt:"Картинка статьи",loading:"lazy"}})]),e("h3",{staticClass:"category_article_card-title"},[t._v(" "+t._s(t.article.name)+" ")]),e("p",{staticClass:"category_article_card-text"},[t._v(" "+t._s(t.article.text)+" ")])])},ct=[],ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"likes"},[e("div",{staticClass:"likes-container"},[e("button",{staticClass:"likes-container-btn btn btn-icon",on:{click:function(e){return t.increase()}}},[e("img",{attrs:{src:"https://klavrenuk.github.io/min-article-book/images1/like.svg",alt:"Иконка лайка"}}),e("span",{staticClass:"count"},[t._v(t._s(t.count))])])])])},dt=[],ht={name:"BlockLikes",props:{likes:{type:Number,required:!1,default:0}},data(){return{count:this.likes}},methods:{increase(){this.count++}}},gt=ht,mt=(0,v.Z)(gt,ut,dt,!1,null,"3f82162d",null),pt=mt.exports,ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article_modal_body"},[e("CustomSelect",{attrs:{settings:t.selectSettings,onSelected:t.onSelected,listOptions:t.listCategories}}),t.isShowNewCategory?e("div",{staticClass:"article_modal_body-new_category"},[e("div",{staticClass:"new_category-container"},[e("div",{staticClass:"new_category-container-wrap_input"},[e("CustomInput",{attrs:{label:"Название новой категории",onChange:t.onChangeName}})],1),e("button",{staticClass:"create_category_btn btn btn-primary",attrs:{disabled:!t.nameNewCategory||!t.nameNewCategory.trim()},on:{click:function(e){return t.onCreateCategory()}}},[t._v(" Создать ")])])]):t._e(),e("ListSelectedItems",{attrs:{onRemove:t.onRemoveSelectedItem,items:t.selectedCategories}})],1)},vt=[],Ct={name:"ArticleModalBody",components:{CustomInput:Q,CustomSelect:H,ListSelectedItems:T},props:{data:{type:Object,required:!1}},data(){return{selectSettings:{key:"article",isHideLabel:!0,isShowOnlyLabel:!0,label:"Категория (может быть несколько, необязательно)"},listCategories:[],selectedCategories:[],isShowNewCategory:!1,nameNewCategory:null}},computed:{...(0,m.Se)(["categoriesForSelect"])},methods:{...(0,m.nv)(["setModalState"]),onSelected(t,e){e.id>0?(this.listCategories=this.listCategories.filter((t=>e.id!==t.id)),this.selectedCategories.push(e)):(this.isShowNewCategory=!0,this.nameNewCategory=null),this.updateStore()},onRemoveSelectedItem(t){const e=this.selectedCategories.splice(t,1);this.listCategories.push(e[0]),this.updateStore()},onCreateCategory(){if(!this.nameNewCategory||!this.nameNewCategory.trim())return!1;this.selectedCategories.push({id:null,name:this.nameNewCategory.trim()}),this.isShowNewCategory=!1,this.updateStore()},setSelectedCategories(){return this.$store.state.categories.filter((t=>{const e=t.articles.filter((t=>t.id===this.data.articleId));if(e.length>0)return t}))},initCategories(){this.selectedCategories=this.setSelectedCategories(),this.listCategories=[{id:0,name:"Создать новую категорию"}];for(let t of this.$store.state.categories){let e=!1;for(let i of this.selectedCategories)t.id===i.id&&(e=!0);e||this.listCategories.push(t)}this.updateStore()},updateStore(){this.setModalState({articleId:this.data.articleId,selectedCategories:this.selectedCategories})},onChangeName(t){this.nameNewCategory=t}},mounted(){this.initCategories()}},yt=Ct,bt=(0,v.Z)(yt,ft,vt,!1,null,"06a94333",null),_t=bt.exports,kt={name:"CategoryArticle",components:{BlockLikes:pt},props:{article:{type:Object,required:!0}},methods:{...(0,m.nv)(["showModalDefault","saveArticle"]),onEditArticle(){this.showModalDefault({title:"Изменение расположения статьи",save:this.saveArticle,content:_t,articleId:this.article.id})}}},wt=kt,St=(0,v.Z)(wt,lt,ct,!1,null,"095b1132",null),Ot=St.exports,Dt=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"list_options"},[e("ul",t._l(t.options,(function(i){return e("li",{key:i.key,staticClass:"list_options-item"},[e("button",{staticClass:"list_options-item-btn",on:{click:function(e){return t.onSelectOption(i.key)}}},[t._v(" "+t._s(i.name)+" ")])])})),0)])},xt=[];const At=t=>{document.addEventListener("keydown",(function e(i){i.key.startsWith("Esc")&&(this.removeEventListener(i.type,e),t())}))};var Pt={name:"ListOptions",props:{options:{type:Array,required:!0},onSelectOption:{type:Function,required:!0},toggleViewOptions:{type:Function,required:!1}},methods:{onClickOutside(){this.toggleViewOptions&&this.toggleViewOptions()}},mounted(){At(this.toggleViewOptions)}},Mt=Pt,It=(0,v.Z)(Mt,Dt,xt,!1,null,"eedfe70a",null),Lt=It.exports,Rt={name:"CardCategory",components:{CategoryArticleCard:Ot,ListOptions:Lt},props:{category:{type:Object,required:!0},index:{type:Number,required:!1,default:-2},isShowDefaultArticles:{type:Boolean,required:!1,default:!0},parent:{type:Object,required:!1}},data(){return{isShowArticles:this.isShowDefaultArticles,controlOptions:[{key:"edit",name:"Редактировать"},{key:"remove",name:"Удалить"}],isShowListOptions:!1}},methods:{...(0,m.nv)(["showModalRemove","showModalDefault","editCategory"]),toggleView(){this.isShowArticles=!this.isShowArticles},toggleViewOptions(){this.isShowListOptions=!this.isShowListOptions},onSelectOption(t){switch(this.toggleViewOptions(),t){case"remove":this.showModalRemove({index:this.index,category:this.category});break;case"edit":this.showModalDefault({categoryIndex:this.index,category:this.category,title:"Редактирование категории",save:this.editCategory,content:et,parent:this.parent});break}}}},Nt=Rt,Vt=(0,v.Z)(Nt,rt,nt,!1,null,"3e5f641e",null),qt=Vt.exports,Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category_empty"},[e("h5",{staticClass:"category_empty-title title"},[t._v(" Пока нет статей ")]),t._m(0),e("ButtonPrimary",{staticClass:"app_header-left-btn",attrs:{onClick:t.onCreateCategory}},[t._t("default",(function(){return[t._v("Создать категорию")]}))],2)],1)},Zt=[function(){var t=this,e=t._self._c;return e("p",{staticClass:"category_empty-description"},[t._v("Создайте свою первую категорию"),e("br"),t._v(" и добавьте в неё статьи.")])}],Tt={name:"CategoriesEmpty",components:{ButtonPrimary:O},methods:{...(0,m.nv)(["showModalDefault","addCategory"]),onCreateCategory(){this.showModalDefault({title:"Новая категория",save:this.addCategory,content:et})}}},Et=Tt,jt=(0,v.Z)(Et,Ft,Zt,!1,null,"92204f18",null),Bt=jt.exports,$t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination"},[e("button",{staticClass:"pagination-btn_arrow pagination-btn_arrow--left btn btn-empty",on:{click:function(e){return t.prev()}}}),e("div",{staticClass:"pagination-numbers"},t._l(t.renderNumbersPages(),(function(i){return e("button",{key:i,staticClass:"pagination-numbers-btn",class:{active:t.activePage===i},attrs:{disabled:null===i},on:{click:function(e){return t.onShowPage(i)}}},[t._v(t._s(null===i?"...":i+1))])})),0),e("button",{staticClass:"pagination-btn_arrow pagination-btn_arrow--right btn btn-empty",on:{click:function(e){return t.next()}}})])},zt=[],Ht={name:"PaginationCategories",props:{countCategories:{type:Number,required:!0},onChange:{type:Function,required:!0}},data(){return{activePage:0,lastPage:1}},methods:{next(){this.lastPage>this.activePage+1&&(this.activePage++,this.onChangeState())},prev(){this.activePage>0&&(this.activePage--,this.onChangeState())},onShowPage(t){this.activePage=t,this.onChangeState()},onChangeState(){const t=3*this.activePage;this.onChange(t,t+3),window.scrollTo({top:0,behavior:"smooth"})},renderNumbersPages(){const t=[];let e=0,i=1;if(this.activePage>2&&(e=this.activePage-2),this.activePage+4>this.lastPage)i=this.lastPage;else switch(this.activePage){case 0:i=this.activePage+4;break;case 1:case 2:i=4;break;default:i=this.activePage+2}for(let s=e;s<i;s++)t.push(s);return i<this.lastPage&&(t.push(null),t.push(this.lastPage-1)),t}},mounted(){this.countCategories>0&&(this.lastPage=Math.ceil(this.countCategories/3))}},Wt=Ht,Gt=(0,v.Z)(Wt,$t,zt,!1,null,"b9522ad0",null),Jt=Gt.exports,Ut={name:"TheCategories",components:{PaginationCategories:Jt,Category:qt,CategoriesEmpty:Bt,HeaderPageCategories:ot},data(){return{categories:[],start:0,end:3,isShowPagination:!1}},watch:{"$store.state.filterArticles":function(t){this.filterCategories(t),this.start=0,this.end=3}},methods:{searchInCategory(t,e){return!!(t.articles&&(t.articles=t.articles.filter((t=>{if(t.name.toLowerCase().search(e.toLowerCase())>-1)return t})),t.articles.length>0))},searchInSubCategory(t,e){return t.subCategories&&(t.subCategories=t.subCategories.filter((t=>{if(t.subCategories){if(this.searchInSubCategory(t,e))return t}else if(this.searchInCategory(t,e))return t}))),!(!this.searchInCategory(t,e)&&Array.isArray(t.subCategories)&&!t.subCategories[0])},filterCategories(t){this.isShowPagination=!1;const e=JSON.parse(JSON.stringify(this.$store.state.categories));this.categories=t?e.filter((e=>{const i=this.searchInCategory(e,t);if(e.subCategories){if(this.searchInSubCategory(e,t))return e}else if(i)return e})):e.slice(),setTimeout((()=>{this.isShowPagination=!0}),0)},onChangePagination(t,e){this.start=t,this.end=e}},mounted(){this.categories=this.$store.state.categories,this.isShowPagination=!0}},Kt=Ut,Qt=(0,v.Z)(Kt,r,n,!1,null,null,null),Xt=Qt.exports,Yt=function(){var t=this;t._self._c;return t._m(0)},te=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"global_loader"},[e("i",{staticClass:"global_loader-icon"})])}],ee={name:"LoaderGlobal"},ie=ee,se=(0,v.Z)(ie,Yt,te,!1,null,"878ccee2",null),ae=se.exports,oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal_remove modal"},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"modal-container"},[t._m(0),t._m(1),e("div",{staticClass:"modal_remove-footer"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.onRemove()}}},[t._v(" Удалить ")]),e("button",{staticClass:"btn",on:{click:function(e){return t.hideModalRemove()}}},[t._v(" Отмена ")])])])])},re=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal_remove-header"},[e("img",{attrs:{src:"https://klavrenuk.github.io/min-article-book/images1/icon-question.svg",alt:"Вопрос"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal_remove-body"},[e("h5",{staticClass:"modal_remove-body-title"},[t._v(" Удалить категорию? ")]),e("p",{staticClass:"modal_remove-body-text"},[t._v(" Все дочерние категории удалятся. ")])])}],ne={name:"ModalRemove",methods:{...(0,m.nv)(["removeCategory","hideModalRemove"]),onRemove(){this.removeCategory(this.$store.state.modalRemove),this.hideModalRemove()},onClickOutside(){this.hideModalRemove()}},mounted(){At(this.hideModalRemove)}},le=ne,ce=(0,v.Z)(le,oe,re,!1,null,"6ccb591f",null),ue=ce.exports,de=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal modal_default"},[t.isShowContent?e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"modal-container"},[e("div",{staticClass:"modal_default-header"},[e("h2",{staticClass:"modal_default-header-title"},[t._v(" "+t._s(t.modal.title)+" ")])]),t.modal.content?e("div",{staticClass:"modal_default-body"},[e(t.modal.content,{tag:"component",attrs:{data:t.modal}})],1):t._e(),e("div",{staticClass:"modal_default-footer"},[e("button",{staticClass:"btn btn-primary modal_default-footer-btn",on:{click:t.onSave}},[t._v(" Сохранить ")]),e("button",{staticClass:"btn modal_default-footer-btn",on:{click:t.onCancel}},[t._v(" Отмена ")])])]):t._e()])},he=[],ge={name:"ModalDefault",data(){return{isShowContent:!1,modal:{}}},computed:{...(0,m.Se)(["modalDefault"])},methods:{...(0,m.nv)(["closeModalDefault"]),onClickOutside(){this.closeModalDefault()},onSave(){this.modal.save&&this.modal.save()},onCancel(){this.closeModalDefault()}},mounted(){this.modalDefault&&(this.modal=this.modalDefault),setTimeout((()=>{this.isShowContent=!0}),0),At(this.closeModalDefault)}},me=ge,pe=(0,v.Z)(me,de,he,!1,null,"78dd5ea9",null),fe=pe.exports,ve=JSON.parse('[{"id":1,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#1","likes":40,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":2,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#2","likes":40,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":3,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#3","likes":12,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":4,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#4","likes":33,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":5,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#5","likes":2,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":6,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#6","likes":0,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":7,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#7","likes":2,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":8,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#8","likes":11,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":9,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#9","likes":1,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"},{"id":10,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#10","likes":5,"img":"https://klavrenuk.github.io/min-article-book/images1/category-title.svg"}]');let Ce;window.indexedDB||window.alert("Ваш браузер не поддерживает IndexedDB.");const ye="miniArticleBook",be="store",_e=()=>new Promise(((t,e)=>{const i=window.indexedDB.open(ye,4);i.onerror=function(t){console.error(t),e(t)},i.onsuccess=function(){Ce=i.result,t()},i.onupgradeneeded=function(e){Ce=e.target.result,Ce.createObjectStore(be,{keyPath:"id"}),t()}})),ke=()=>new Promise(((t,e)=>{const i=Ce.transaction([be],"readwrite").objectStore(be).clear();i.onsuccess=function(){t(!0)},i.onerror=function(t){console.error(t),e(t)}})),we=()=>new Promise(((t,e)=>{try{const i=Ce.transaction([be]).objectStore(be);i&&(i.openCursor().onsuccess=function(e){const i=e.target.result;i&&Array.isArray(i.value.categories)?t(i.value.categories):t([])},i.openCursor().onerror=function(){e(null)})}catch(i){t([])}})),Se=t=>new Promise(((e,i)=>{const s=Ce.transaction([be],"readwrite").objectStore(be).add({id:1,categories:t});s.onsuccess=function(){e(!0)},s.onerror=function(t){console.error("Unable to add data ",t),i(t)}})),Oe=async t=>{await ke(),await Se(t)};var De={name:"App",components:{ModalDefault:fe,ModalRemove:ue,LoaderGlobal:ae,TheCategories:Xt},computed:{...(0,m.Se)(["isShowModalRemove","isShowModalDefault"])},methods:{...(0,m.nv)(["setLoading","setArticles","setCategoriesDefault"]),clearStore(){ke(),window.location.reload()}},async beforeCreate(){await _e();const t=await we();this.setArticles(ve),this.setCategoriesDefault(t),setTimeout((()=>{this.setLoading(!1)}),600)}},xe=De,Ae=(0,v.Z)(xe,a,o,!1,null,null,null),Pe=Ae.exports;const Me={isShowModalRemove(t){return!!t.modalRemove},isShowModalDefault(t){return!!t.modalDefault},modalDefault(t){return t.modalDefault}};var Ie=Me;const Le={setLoading(t,e=!1){t.isLoading=e}};var Re=Le;const Ne=(t=!1)=>{const e=document.getElementById("body");e&&(t?e.classList.add("fixed"):e.classList.remove("fixed"))},Ve={showModalDefault(t,e){t.modalDefault={...e,isShow:!0},Ne(!0)},setModalState(t,e){t.modalDefault={...t.modalDefault,...e}},closeModalDefault(t){t.modalDefault=null,Ne(!1)},showModalRemove(t,e){t.modalRemove=e,Ne(!0)},hideModalRemove(t){t.modalRemove=null,Ne(!1)}};var qe=Ve;const Fe=(t,e)=>{if(t.id===e.parent)t.subCategories||(t.subCategories=[]),t.subCategories.push(e);else if(t.subCategories)for(let i of t.subCategories)Fe(i,e)},Ze=(t,e)=>{if(t.subCategories){let i=0;for(let s of t.subCategories){if(s.id===e.id)break;s.subCategories&&Ze(s,e),i++}t.subCategories.splice(i,1)}},Te=t=>!t.name||t.name&&!t.name.trim()?{value:!1,options:[{key:"name",message:"Поле не должно быть пустое"}]}:{value:!0,options:[]};function Ee(t){t.isLoading=!0,setTimeout((()=>{t.isLoading=!1,Ne()}),600)}const je={addCategory(t){const e={id:(new Date).getTime(),name:t.modalDefault.category.name,articles:t.modalDefault.articleSelected.slice(),parent:t.modalDefault.category.parent||null},i=Te(e);if(i.value){if(t.isValidModalItem=null,e.parent)for(let i of t.categories)Fe(i,e);else t.categories.unshift(e);t.modalDefault=null,Ee(t),Oe(t.categories)}else t.isValidModalItem=[...i.options]},editCategory(t){const e={...t.modalDefault.category,articles:t.modalDefault.articleSelected.slice()},i=Te(e);if(i.value){if(t.isValidModalItem=null,t.modalDefault.categoryIndex>=0)t.categories[t.modalDefault.categoryIndex]={...e};else{for(let i of t.categories)Ze(i,e);for(let i of t.categories)Fe(i,e)}t.modalDefault=null,Ee(t),Oe(t.categories)}else t.isValidModalItem=[...i.options]},removeCategory(t,e){let i=0;for(let s of t.categories){if(s.id===e.category.id)break;Ze(s,e.category),i++}t.categories.splice(i,1),Ee(t),Oe(t.categories)},setFilterArticles(t,e){t.filterArticles=e},setCategoriesDefault(t,e){t.categories=e}};var Be=je;function $e(t){t.isLoading=!0,setTimeout((()=>{t.isLoading=!1,Ne()}),600)}const ze={setArticles(t,e){t.articles=e},saveArticle(t){try{const e=t.modalDefault.selectedCategories.filter((t=>null===t.id));for(let a of e)a.id=(new Date).getTime(),t.categories.unshift(a),t.modalDefault.selectedCategories.push(a);const i=t.modalDefault.selectedCategories.map((t=>t.id)),s=t.articles.filter((e=>{if(t.modalDefault.articleId===e.id)return e}));for(let a of t.categories){let e=!1;a.articles||(a.articles=[]),a.articles=a.articles.filter((s=>s.id!==t.modalDefault.articleId?s:i.includes(a.id)?(e=!0,s):void 0)),!e&&i.includes(a.id)&&a.articles.push(s[0])}t.modalDefault=null,$e(t),Oe(t.categories)}catch(e){console.error(e)}}};var He=ze;const We={...Re,...qe,...Be,...He};var Ge=We;const Je={setLoading({commit:t},e=!1){t("setLoading",e)}};var Ue=Je;const Ke={showModalDefault({commit:t},e={}){t("showModalDefault",e)},closeModalDefault({commit:t}){t("closeModalDefault")},showModalRemove({commit:t},e){t("showModalRemove",e)},hideModalRemove({commit:t}){t("hideModalRemove")},setModalState({commit:t},e){t("setModalState",e)}};var Qe=Ke;const Xe={addCategory({commit:t}){t("addCategory")},editCategory({commit:t},e={}){t("editCategory",e)},removeCategory({commit:t},e){t("removeCategory",e)},setFilterArticles({commit:t},e){t("setFilterArticles",e)},setCategoriesDefault({commit:t},e){t("setCategoriesDefault",e)}};var Ye=Xe;const ti={setArticles({commit:t},e=[]){t("setArticles",e)},saveArticle({commit:t},e){t("saveArticle",e)}};var ei=ti;const ii={...Ue,...Qe,...Ye,...ei};var si=ii;s.ZP.use(m.ZP);const ai={isLoading:!0,categories:[],modalRemove:null,articles:[],filterArticles:null,modalDefault:null,isValidModalItem:null};var oi=new m.ZP.Store({state:ai,mutations:Ge,getters:Ie,actions:si}),ri=i(3318),ni=i.n(ri);s.ZP.config.productionTip=!1,s.ZP.use(g()),s.ZP.use(ni()),new s.ZP({render:t=>t(Pe),store:oi}).$mount("#app")}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,a,o){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],a=t[u][1],o=t[u][2];for(var n=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(n=!1,o<r&&(r=o));if(n){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,a,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={826:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,o,r=s[0],n=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(l)var u=l(i)}for(e&&e(s);c<r.length;c++)o=r[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(u)},s=self["webpackChunkmini_article_book"]=self["webpackChunkmini_article_book"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(7087)}));s=i.O(s)})();
//# sourceMappingURL=index.06f1da29.js.map