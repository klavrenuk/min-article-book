(function(){"use strict";var e={2863:function(e,t,s){var i=s(6369),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app",attrs:{id:"app"}},[e.$store.state.isLoading?t("LoaderGlobal"):t("div",[t("button",{staticClass:"app_header-refresh",on:{click:e.clearStore}},[e._v(" Сбросить состояния приложения ")]),t("div",{staticClass:"container block_with_effect",class:e.$store.state.isLoading?"":"active"},[t("TheCategories"),e.isShowModalRemove?t("ModalRemove"):e._e(),e.isShowModalDefault?t("ModalDefault"):e._e()],1)])],1)},o=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"categories"},[t("HeaderPageCategories"),t("div",{staticClass:"categories-content"},[e.$store.state.categories[0]?t("div",[e._l(e.categories.slice(e.start,e.end),(function(e,s){return t("Category",{key:e.id,attrs:{category:e,index:s}})})),e.isShowPagination?t("PaginationCategories",{attrs:{onChange:e.onChangePagination,countCategories:e.categories.length}}):e._e()],2):t("div",[t("CategoriesEmpty")],1)])],1)},n=[],l=function(){var e=this,t=e._self._c;return t("header",{staticClass:"app_header"},[t("div",{staticClass:"app_header-container"},[t("div",{staticClass:"app_header-left"},[t("ButtonPrimary",{staticClass:"app_header-left-btn",attrs:{onClick:e.onCreateCategory}},[e._t("default",(function(){return[e._v("Создать категорию")]}))],2)],1),t("div",{staticClass:"app_header-search"},[t("SearchCategories")],1)])])},c=[],u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search_categories"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.searchStr,expression:"searchStr",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:e.delay,expression:"delay"}],staticClass:"search_categories-input input",attrs:{placeholder:"Найти статью"},domProps:{value:e.searchStr},on:{change:function(t){e.searchStr=t.target.value}}}),t("button",{staticClass:"btn btn-icon search_categories-clear",on:{click:e.clear}}),t("button",{staticClass:"btn btn-icon search_categories-magnifier"})])},d=[],g=s(3783),h=s.n(g),m=s(3822),p={name:"SearchCategories",data(){return{searchStr:null,delay:600}},directives:{debounce:g.directive},watch:{searchStr(e){this.setFilterArticles(e)}},methods:{...(0,m.nv)(["setFilterArticles"]),clear(){this.searchStr=null}}},f=p,v=s(1001),C=(0,v.Z)(f,u,d,!1,null,null,null),y=C.exports,_=function(){var e=this,t=e._self._c;return t("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.onClick()}}},[t("div",{staticClass:"btn-primary-container"},[t("span",{staticClass:"btn-primary-text"},[e._t("default")],2),t("img",{staticClass:"btn-primary-plus",attrs:{src:"/images1/plus.svg",alt:"Plus"}})])])},b=[],w={name:"ButtonPrimary",props:{onClick:{type:Function,required:!1}}},S=w,k=(0,v.Z)(S,_,b,!1,null,"5b477e2f",null),O=k.exports,D=function(){var e=this,t=e._self._c;return t("div",{staticClass:"category_modal_body"},[e.isShowForm?t("form",[t("div",{staticClass:"form-group"},[t("CustomInput",{attrs:{label:"Название",onChange:e.onChangeName,defaultValue:e.category.name,invalid:e.invalid}})],1),t("div",{staticClass:"form-group"},[t("CustomSelect",{attrs:{settings:e.settingsParentCategory,listOptions:e.parentCategories,onSelected:e.onSelected}})],1),t("div",{staticClass:"from-group"},[t("SelectWithSearch",{attrs:{settings:e.articleSettings,options:e.articlesFree,onSelect:e.onSelected}}),t("ListSelectedItems",{attrs:{onRemove:e.onRemoveSelectedItem,items:e.selectedArticles}})],1)]):e._e()])},x=[],A=(s(7658),function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"select_with_search custom_select"},[t("div",{staticClass:"select_with_search-header"},[t("label",{staticClass:"select_with_search-header-label",class:{active:e.searchStr||e.isShowOptions},on:{click:e.showOptions}},[e._v(e._s(e.settings.label))]),t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.searchStr,expression:"searchStr",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:e.delay,expression:"delay"}],staticClass:"select_with_search-header-input input",domProps:{value:e.searchStr},on:{click:function(t){return e.showOptions()},input:function(t){return e.showOptions()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onEsc(t)},change:function(t){e.searchStr=t.target.value}}})]),e.isShowOptions?t("ul",{staticClass:"select_with_search-list custom_select-list"},[t("li",{staticClass:"custom_select-list-item"},e._l(e.filteredOptions,(function(s){return t("button",{key:s.id,staticClass:"custom_select-list-item-btn btn-empty",attrs:{type:"button"},on:{click:function(t){return e.onSelectedOption(s)}}},[e._v(" "+e._s(s.name)+" ")])})),0)]):e._e()])}),P=[],M={name:"SelectWithSearch",props:{settings:{type:Object,required:!1},options:{type:Array,required:!0},onSelect:{type:Function,required:!1}},directives:{debounce:g.directive},data(){return{isShowOptions:!1,searchStr:null,delay:600,filteredOptions:[]}},watch:{searchStr(e){this.filterOptions(e)},options(){this.filteredOptions=this.options.slice()}},methods:{onEsc(e){e.target.blur(),this.isShowOptions=!1},onSelectedOption(e){this.searchStr=null,this.onSelect(this.settings.key,e),this.isShowOptions=!1},showOptions(){this.isShowOptions=!0},onClickOutside(){this.isShowOptions=!1},filterOptions(e){this.filteredOptions=e?this.options.filter((t=>{if(t.name.toLowerCase().search(e.toLowerCase())>-1)return t})):this.options.slice()}},mounted(){this.filteredOptions=this.options.slice()}},I=M,L=(0,v.Z)(I,A,P,!1,null,"7952f1b2",null),R=L.exports,N=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"list_selected_items"},e._l(e.items,(function(s,i){return t("li",{key:s.id,staticClass:"selected_item"},[t("button",{staticClass:"selected_item-remove btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.onRemove(i)}}},[e._m(0,!0)]),t("span",{staticClass:"selected_item-name"},[e._v(e._s(s.name))])])})),0)},V=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"selected_item-remove-container"},[t("img",{attrs:{src:"/images1/icon-trash.svg",alt:"Иконка удаления"}})])}],q={name:"RowSelectedCategories",props:{items:{type:Array,required:!1},onRemove:{type:Function,required:!0}}},F=q,Z=(0,v.Z)(F,N,V,!1,null,"15b7d4ce",null),T=Z.exports,E=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"custom_select"},[t("button",{staticClass:"custom_select-button_top btn btn-empty",attrs:{type:"button"},on:{click:e.toggleView,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onEsc()}}},[e.settings.isHideLabel?e._e():t("label",{staticClass:"button_top-label",class:{active:e.selectedItem}},[e._v(e._s(e.settings.label))]),"default"===e.type?t("span",{staticClass:"button_top-text"},[e._v(" "+e._s(e.selectedItem&&!e.settings.isShowOnlyLabel?e.selectedItem:"")+" ")]):e._e(),t("i",{staticClass:"button_top-icon"})]),e.isShowOptions?t("ul",{staticClass:"custom_select-list"},e._l(e.listOptions,(function(s,i){return t("li",{key:`${s}-${i}`,staticClass:"custom_select-list-item",on:{click:function(t){return e.onSelect(s)}}},[t("button",{staticClass:"custom_select-list-item-btn btn btn-empty",class:{active:e.isActiveOption(s.id)}},[e._v(" "+e._s(s.name)+" ")])])})),0):e._e()])},j=[],B={name:"CustomSelect",props:{settings:{type:Object,required:!0},onSelected:{type:Function,required:!1},listOptions:{type:Array,required:!0},type:{type:String,required:!1,default:"default"},selectedDefault:{type:Array,required:!1}},data(){return{isShowOptions:!1,selectedItem:null,selectedList:[],selectedListIds:[]}},methods:{onEsc(){this.isShowOptions=!1},onClickOutside(){this.isShowOptions=!1},toggleView(){this.isShowOptions=!this.isShowOptions},isActiveOption(e){const t=this.selectedListIds.indexOf(e);return t>-1},onSelect(e){this.toggleView(),this.selectedItem=e.name,this.onSelected&&this.onSelected(this.settings.key,e)}},mounted(){Array.isArray(this.selectedDefault)&&(this.selectedList=this.selectedDefault.slice(),this.selectedListIds=this.selectedDefault.map((e=>e.id))),this.settings&&this.settings.selectedItem&&(this.selectedItem=this.settings.selectedItem)}},$=B,z=(0,v.Z)($,E,j,!1,null,"4ac93738",null),H=z.exports,W=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"custom_input",class:e.invalid?"invalid":""},[t("label",{staticClass:"custom_input-label",class:{active:e.isActiveLabel},on:{click:function(t){return e.onFocus()}}},[e._v(" "+e._s(e.label)+" ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"RefInput",staticClass:"input custom_input-input",class:{active:e.isActiveLabel},domProps:{value:e.value},on:{input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){return e.onChangeValue()}],click:function(t){return e.onClickInput()},blur:function(t){return e.toggleView()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onEsc(t)}}}),e.invalid?t("label",{staticClass:"custom_input-message"},[e._v(e._s(e.invalid.message))]):e._e()])},G=[],J={name:"CustomInput",props:{label:{type:String,required:!0},onChange:{type:Function,required:!0},defaultValue:{type:String,required:!1,default:null},invalid:{type:Object,required:!1}},data(){return{value:null,isActiveLabel:!1}},methods:{onChangeValue(){this.onChange(this.value),null!==this.value&&(this.isActiveLabel=!0)},onFocus(){this.$refs.RefInput.focus(),this.isActiveLabel=!0},onClickOutside(){this.toggleView()},onClickInput(){this.isActiveLabel=!0},toggleView(){!this.value||this.value&&!this.value.trim()?this.isActiveLabel=!1:this.isActiveLabel=!0},onEsc(e){e.target.blur(),this.toggleView()}},mounted(){this.value=this.defaultValue,this.toggleView()}},U=J,K=(0,v.Z)(U,W,G,!1,null,"345847a8",null),Q=K.exports,X={name:"CategoryModalBody",components:{CustomSelect:H,SelectWithSearch:R,ListSelectedItems:T,CustomInput:Q},data(){return{invalid:null,category:{},isShowForm:!1,selectedArticles:[],articleSettings:{label:"Вложенные статьи",key:"article"},settingsParentCategory:{label:"Родительская категория (необязательно)",key:"parent",selectedItem:null},articlesFree:[],parentCategories:[]}},computed:{...(0,m.Se)(["modalDefault"])},watch:{"$store.state.isValidModalItem":function(e){if(this.invalid=null,e&&Array.isArray(e))for(let t of e)"name"===t.key&&(this.invalid={message:t.message,isValid:!1})}},methods:{...(0,m.nv)(["addCategory","editCategory","setModalState"]),onChangeName(e){this.category.name=e,this.updateStore()},onSelected(e,t){switch(e){case"article":this.selectedArticles.push(t),this.setArticleFree();break;case"parent":this.category.parent=t.id;break;default:this.category[e]=t;break}this.updateStore()},onRemoveSelectedItem(e){this.selectedArticles.splice(e,1),this.setArticleFree(),this.updateStore()},setArticleFree(){this.articlesFree=this.$store.state.articles.filter((e=>{let t=!1;for(let s of this.selectedArticles)s.id===e.id&&(t=!0);if(!t)return e}))},updateStore(){this.setModalState({articleSelected:this.selectedArticles,category:{...this.category}})},getCategory(e){if(e.subCategories){this.category.id!==e.id&&this.parentCategories.push(e);for(let t of e.subCategories)this.getCategory(t,e)}else this.category.id!==e.id&&this.parentCategories.push(e)},setParentCategories(){this.parentCategories=[];for(let e of this.$store.state.categories)this.getCategory(e)}},mounted(){this.modalDefault.category&&this.modalDefault.category.id&&(this.category={...this.modalDefault.category,index:this.modalDefault.categoryIndex},this.selectedArticles=this.modalDefault.category.articles.slice(),this.modalDefault.parent&&(this.settingsParentCategory.selectedItem=this.modalDefault.parent.name)),this.setArticleFree(),this.setParentCategories(),this.updateStore(),setTimeout((()=>{this.isShowForm=!0}),0)}},Y=X,ee=(0,v.Z)(Y,D,x,!1,null,"723befe6",null),te=ee.exports,se={name:"HeaderPageCategories",components:{SearchCategories:y,ButtonPrimary:O},methods:{...(0,m.nv)(["showModalDefault","addCategory"]),onCreateCategory(){this.showModalDefault({title:"Новая категория",save:this.addCategory,content:te})}}},ie=se,ae=(0,v.Z)(ie,l,c,!1,null,"c864cf74",null),oe=ae.exports,re=function(){var e=this,t=e._self._c;return t("section",{staticClass:"category"},[t("div",{staticClass:"category-header"},[t("button",{staticClass:"btn btn-empty wrap-category-title",on:{click:function(t){return e.toggleView()}}},[t("h3",{staticClass:"category-title"},[e._v(" "+e._s(e.category.name)+" "),t("span",{staticClass:"category-title-count"},[e._v("("+e._s(e.category.articles.length)+")")])])]),t("div",{staticClass:"category-header-control"},[t("button",{staticClass:"btn btn-icon btn_toggle_view",class:e.isShowArticles?"":"close",on:{click:function(t){return e.toggleView()}}}),t("button",{staticClass:"btn btn-icon btn_options",on:{click:function(t){return e.toggleViewOptions()}}}),e.isShowListOptions?t("ListOptions",{attrs:{options:e.controlOptions,onSelectOption:e.onSelectOption,toggleViewOptions:e.toggleViewOptions}}):e._e()],1)]),e.isShowArticles?t("div",[t("ul",{staticClass:"category-list"},e._l(e.category.articles,(function(e){return t("li",{key:e.id,staticClass:"category-list-item"},[t("CategoryArticleCard",{attrs:{article:e}})],1)})),0),t("div",{staticClass:"category-subcategories"},[t("ul",{staticClass:"subcategories-list"},e._l(e.category.subCategories,(function(s){return t("li",{key:s.id},[t("CardCategory",{attrs:{category:s,isShowDefaultArticles:!1,parent:e.category}})],1)})),0)])]):e._e()])},ne=[],le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"category_article_card"},[t("div",{staticClass:"category_article_card-top"},[t("BlockLikes",{attrs:{likes:e.article.likes}}),t("button",{staticClass:"btn btn-icon category_article_card-top-edit",on:{click:function(t){return e.onEditArticle()}}})],1),t("div",{staticClass:"category_article_card-wrap_img"},[t("img",{attrs:{src:e.article.img,alt:"Картинка статьи",loading:"lazy"}})]),t("h3",{staticClass:"category_article_card-title"},[e._v(" "+e._s(e.article.name)+" ")]),t("p",{staticClass:"category_article_card-text"},[e._v(" "+e._s(e.article.text)+" ")])])},ce=[],ue=function(){var e=this,t=e._self._c;return t("div",{staticClass:"likes"},[t("div",{staticClass:"likes-container"},[t("button",{staticClass:"likes-container-btn btn btn-icon",on:{click:function(t){return e.increase()}}},[t("img",{attrs:{src:"/images1/like.svg",alt:"Иконка лайка"}}),t("span",{staticClass:"count"},[e._v(e._s(e.count))])])])])},de=[],ge={name:"BlockLikes",props:{likes:{type:Number,required:!1,default:0}},data(){return{count:this.likes}},methods:{increase(){this.count++}}},he=ge,me=(0,v.Z)(he,ue,de,!1,null,"17f00d48",null),pe=me.exports,fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"article_modal_body"},[t("CustomSelect",{attrs:{settings:e.selectSettings,onSelected:e.onSelected,listOptions:e.listCategories}}),e.isShowNewCategory?t("div",{staticClass:"article_modal_body-new_category"},[t("div",{staticClass:"new_category-container"},[t("div",{staticClass:"new_category-container-wrap_input"},[t("CustomInput",{attrs:{label:"Название новой категории",onChange:e.onChangeName}})],1),t("button",{staticClass:"create_category_btn btn btn-primary",attrs:{disabled:!e.nameNewCategory||!e.nameNewCategory.trim()},on:{click:function(t){return e.onCreateCategory()}}},[e._v(" Создать ")])])]):e._e(),t("ListSelectedItems",{attrs:{onRemove:e.onRemoveSelectedItem,items:e.selectedCategories}})],1)},ve=[],Ce={name:"ArticleModalBody",components:{CustomInput:Q,CustomSelect:H,ListSelectedItems:T},props:{data:{type:Object,required:!1}},data(){return{selectSettings:{key:"article",isHideLabel:!0,isShowOnlyLabel:!0,label:"Категория (может быть несколько, необязательно)"},listCategories:[],selectedCategories:[],isShowNewCategory:!1,nameNewCategory:null}},computed:{...(0,m.Se)(["categoriesForSelect"])},methods:{...(0,m.nv)(["setModalState"]),onSelected(e,t){t.id>0?(this.listCategories=this.listCategories.filter((e=>t.id!==e.id)),this.selectedCategories.push(t)):(this.isShowNewCategory=!0,this.nameNewCategory=null),this.updateStore()},onRemoveSelectedItem(e){const t=this.selectedCategories.splice(e,1);this.listCategories.push(t[0]),this.updateStore()},onCreateCategory(){if(!this.nameNewCategory||!this.nameNewCategory.trim())return!1;this.selectedCategories.push({id:null,name:this.nameNewCategory.trim()}),this.isShowNewCategory=!1,this.updateStore()},setSelectedCategories(){return this.$store.state.categories.filter((e=>{const t=e.articles.filter((e=>e.id===this.data.articleId));if(t.length>0)return e}))},initCategories(){this.selectedCategories=this.setSelectedCategories(),this.listCategories=[{id:0,name:"Создать новую категорию"}];for(let e of this.$store.state.categories){let t=!1;for(let s of this.selectedCategories)e.id===s.id&&(t=!0);t||this.listCategories.push(e)}this.updateStore()},updateStore(){this.setModalState({articleId:this.data.articleId,selectedCategories:this.selectedCategories})},onChangeName(e){this.nameNewCategory=e}},mounted(){this.initCategories()}},ye=Ce,_e=(0,v.Z)(ye,fe,ve,!1,null,"06a94333",null),be=_e.exports,we={name:"CategoryArticle",components:{BlockLikes:pe},props:{article:{type:Object,required:!0}},methods:{...(0,m.nv)(["showModalDefault","saveArticle"]),onEditArticle(){this.showModalDefault({title:"Изменение расположения статьи",save:this.saveArticle,content:be,articleId:this.article.id})}}},Se=we,ke=(0,v.Z)(Se,le,ce,!1,null,"095b1132",null),Oe=ke.exports,De=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"list_options"},[t("ul",e._l(e.options,(function(s){return t("li",{key:s.key,staticClass:"list_options-item"},[t("button",{staticClass:"list_options-item-btn",on:{click:function(t){return e.onSelectOption(s.key)}}},[e._v(" "+e._s(s.name)+" ")])])})),0)])},xe=[];const Ae=e=>{document.addEventListener("keydown",(function t(s){s.key.startsWith("Esc")&&(this.removeEventListener(s.type,t),e())}))};var Pe={name:"ListOptions",props:{options:{type:Array,required:!0},onSelectOption:{type:Function,required:!0},toggleViewOptions:{type:Function,required:!1}},methods:{onClickOutside(){this.toggleViewOptions&&this.toggleViewOptions()}},mounted(){Ae(this.toggleViewOptions)}},Me=Pe,Ie=(0,v.Z)(Me,De,xe,!1,null,"eedfe70a",null),Le=Ie.exports,Re={name:"CardCategory",components:{CategoryArticleCard:Oe,ListOptions:Le},props:{category:{type:Object,required:!0},index:{type:Number,required:!1,default:-2},isShowDefaultArticles:{type:Boolean,required:!1,default:!0},parent:{type:Object,required:!1}},data(){return{isShowArticles:this.isShowDefaultArticles,controlOptions:[{key:"edit",name:"Редактировать"},{key:"remove",name:"Удалить"}],isShowListOptions:!1}},methods:{...(0,m.nv)(["showModalRemove","showModalDefault","editCategory"]),toggleView(){this.isShowArticles=!this.isShowArticles},toggleViewOptions(){this.isShowListOptions=!this.isShowListOptions},onSelectOption(e){switch(this.toggleViewOptions(),e){case"remove":this.showModalRemove({index:this.index,category:this.category});break;case"edit":this.showModalDefault({categoryIndex:this.index,category:this.category,title:"Редактирование категории",save:this.editCategory,content:te,parent:this.parent});break}}}},Ne=Re,Ve=(0,v.Z)(Ne,re,ne,!1,null,"3e5f641e",null),qe=Ve.exports,Fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"category_empty"},[t("h5",{staticClass:"category_empty-title title"},[e._v(" Пока нет статей ")]),e._m(0),t("ButtonPrimary",{staticClass:"app_header-left-btn",attrs:{onClick:e.onCreateCategory}},[e._t("default",(function(){return[e._v("Создать категорию")]}))],2)],1)},Ze=[function(){var e=this,t=e._self._c;return t("p",{staticClass:"category_empty-description"},[e._v("Создайте свою первую категорию"),t("br"),e._v(" и добавьте в неё статьи.")])}],Te={name:"CategoriesEmpty",components:{ButtonPrimary:O},methods:{...(0,m.nv)(["showModalDefault","addCategory"]),onCreateCategory(){this.showModalDefault({title:"Новая категория",save:this.addCategory,content:te})}}},Ee=Te,je=(0,v.Z)(Ee,Fe,Ze,!1,null,"92204f18",null),Be=je.exports,$e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination"},[t("button",{staticClass:"pagination-btn_arrow pagination-btn_arrow--left btn btn-empty",on:{click:function(t){return e.prev()}}}),t("div",{staticClass:"pagination-numbers"},e._l(e.renderNumbersPages(),(function(s){return t("button",{key:s,staticClass:"pagination-numbers-btn",class:{active:e.activePage===s},attrs:{disabled:null===s},on:{click:function(t){return e.onShowPage(s)}}},[e._v(e._s(null===s?"...":s+1))])})),0),t("button",{staticClass:"pagination-btn_arrow pagination-btn_arrow--right btn btn-empty",on:{click:function(t){return e.next()}}})])},ze=[],He={name:"PaginationCategories",props:{countCategories:{type:Number,required:!0},onChange:{type:Function,required:!0}},data(){return{activePage:0,lastPage:1}},methods:{next(){this.lastPage>this.activePage+1&&(this.activePage++,this.onChangeState())},prev(){this.activePage>0&&(this.activePage--,this.onChangeState())},onShowPage(e){this.activePage=e,this.onChangeState()},onChangeState(){const e=3*this.activePage;this.onChange(e,e+3),window.scrollTo({top:0,behavior:"smooth"})},renderNumbersPages(){const e=[];let t=0,s=1;if(this.activePage>2&&(t=this.activePage-2),this.activePage+4>this.lastPage)s=this.lastPage;else switch(this.activePage){case 0:s=this.activePage+4;break;case 1:case 2:s=4;break;default:s=this.activePage+2}for(let i=t;i<s;i++)e.push(i);return s<this.lastPage&&(e.push(null),e.push(this.lastPage-1)),e}},mounted(){this.countCategories>0&&(this.lastPage=Math.ceil(this.countCategories/3))}},We=He,Ge=(0,v.Z)(We,$e,ze,!1,null,"b9522ad0",null),Je=Ge.exports,Ue={name:"TheCategories",components:{PaginationCategories:Je,Category:qe,CategoriesEmpty:Be,HeaderPageCategories:oe},data(){return{categories:[],start:0,end:3,isShowPagination:!1}},watch:{"$store.state.filterArticles":function(e){this.filterCategories(e),this.start=0,this.end=3}},methods:{searchInCategory(e,t){return!!(e.articles&&(e.articles=e.articles.filter((e=>{if(e.name.toLowerCase().search(t.toLowerCase())>-1)return e})),e.articles.length>0))},searchInSubCategory(e,t){return e.subCategories&&(e.subCategories=e.subCategories.filter((e=>{if(e.subCategories){if(this.searchInSubCategory(e,t))return e}else if(this.searchInCategory(e,t))return e}))),!(!this.searchInCategory(e,t)&&Array.isArray(e.subCategories)&&!e.subCategories[0])},filterCategories(e){this.isShowPagination=!1;const t=JSON.parse(JSON.stringify(this.$store.state.categories));this.categories=e?t.filter((t=>{const s=this.searchInCategory(t,e);if(t.subCategories){if(this.searchInSubCategory(t,e))return t}else if(s)return t})):t.slice(),setTimeout((()=>{this.isShowPagination=!0}),0)},onChangePagination(e,t){this.start=e,this.end=t}},mounted(){this.categories=this.$store.state.categories,this.isShowPagination=!0}},Ke=Ue,Qe=(0,v.Z)(Ke,r,n,!1,null,null,null),Xe=Qe.exports,Ye=function(){var e=this;e._self._c;return e._m(0)},et=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"global_loader"},[t("i",{staticClass:"global_loader-icon"})])}],tt={name:"LoaderGlobal"},st=tt,it=(0,v.Z)(st,Ye,et,!1,null,"878ccee2",null),at=it.exports,ot=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal_remove modal"},[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"modal-container"},[e._m(0),e._m(1),t("div",{staticClass:"modal_remove-footer"},[t("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.onRemove()}}},[e._v(" Удалить ")]),t("button",{staticClass:"btn",on:{click:function(t){return e.hideModalRemove()}}},[e._v(" Отмена ")])])])])},rt=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal_remove-header"},[t("img",{attrs:{src:"/images1/icon-question.svg",alt:"Вопрос"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal_remove-body"},[t("h5",{staticClass:"modal_remove-body-title"},[e._v(" Удалить категорию? ")]),t("p",{staticClass:"modal_remove-body-text"},[e._v(" Все дочерние категории удалятся. ")])])}],nt={name:"ModalRemove",methods:{...(0,m.nv)(["removeCategory","hideModalRemove"]),onRemove(){this.removeCategory(this.$store.state.modalRemove),this.hideModalRemove()},onClickOutside(){this.hideModalRemove()}},mounted(){Ae(this.hideModalRemove)}},lt=nt,ct=(0,v.Z)(lt,ot,rt,!1,null,"4da539b8",null),ut=ct.exports,dt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal modal_default"},[e.isShowContent?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"modal-container"},[t("div",{staticClass:"modal_default-header"},[t("h2",{staticClass:"modal_default-header-title"},[e._v(" "+e._s(e.modal.title)+" ")])]),e.modal.content?t("div",{staticClass:"modal_default-body"},[t(e.modal.content,{tag:"component",attrs:{data:e.modal}})],1):e._e(),t("div",{staticClass:"modal_default-footer"},[t("button",{staticClass:"btn btn-primary modal_default-footer-btn",on:{click:e.onSave}},[e._v(" Сохранить ")]),t("button",{staticClass:"btn modal_default-footer-btn",on:{click:e.onCancel}},[e._v(" Отмена ")])])]):e._e()])},gt=[],ht={name:"ModalDefault",data(){return{isShowContent:!1,modal:{}}},computed:{...(0,m.Se)(["modalDefault"])},methods:{...(0,m.nv)(["closeModalDefault"]),onClickOutside(){this.closeModalDefault()},onSave(){this.modal.save&&this.modal.save()},onCancel(){this.closeModalDefault()}},mounted(){this.modalDefault&&(this.modal=this.modalDefault),setTimeout((()=>{this.isShowContent=!0}),0),Ae(this.closeModalDefault)}},mt=ht,pt=(0,v.Z)(mt,dt,gt,!1,null,"78dd5ea9",null),ft=pt.exports,vt=JSON.parse('[{"id":1,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#1","likes":40,"img":"/images1/category-title.svg"},{"id":2,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#2","likes":40,"img":"/images1/category-title.svg"},{"id":3,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#3","likes":12,"img":"/images1/category-title.svg"},{"id":4,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#4","likes":33,"img":"/images1/category-title.svg"},{"id":5,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#5","likes":2,"img":"/images1/category-title.svg"},{"id":6,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#6","likes":0,"img":"/images1/category-title.svg"},{"id":7,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#7","likes":2,"img":"/images1/category-title.svg"},{"id":8,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#8","likes":11,"img":"/images1/category-title.svg"},{"id":9,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#9","likes":1,"img":"/images1/category-title.svg"},{"id":10,"text":"Идейные соображения высшего порядка, а также сложившаяся структура организации играет важную роль в формировании существенных финансовых и административных условий. Равным образом начало повседневной работы по формированию позиции представляет собой интересный эксперимент проверки направлений прогрессивного развития.","name":"Title#10","likes":5,"img":"/images1/category-title.svg"}]');let Ct;window.indexedDB||window.alert("Ваш браузер не поддерживает IndexedDB.");const yt="miniArticleBook",_t="store",bt=()=>new Promise(((e,t)=>{const s=window.indexedDB.open(yt,4);s.onerror=function(e){console.error(e),t(e)},s.onsuccess=function(){Ct=s.result,e()},s.onupgradeneeded=function(t){Ct=t.target.result,Ct.createObjectStore(_t,{keyPath:"id"}),e()}})),wt=()=>new Promise(((e,t)=>{const s=Ct.transaction([_t],"readwrite").objectStore(_t).clear();s.onsuccess=function(){e(!0)},s.onerror=function(e){console.error(e),t(e)}})),St=()=>new Promise(((e,t)=>{try{const s=Ct.transaction([_t]).objectStore(_t);s&&(s.openCursor().onsuccess=function(t){const s=t.target.result;s&&Array.isArray(s.value.categories)?e(s.value.categories):e([])},s.openCursor().onerror=function(){t(null)})}catch(s){e([])}})),kt=e=>new Promise(((t,s)=>{const i=Ct.transaction([_t],"readwrite").objectStore(_t).add({id:1,categories:e});i.onsuccess=function(){t(!0)},i.onerror=function(e){console.error("Unable to add data ",e),s(e)}})),Ot=async e=>{await wt(),await kt(e)};var Dt={name:"App",components:{ModalDefault:ft,ModalRemove:ut,LoaderGlobal:at,TheCategories:Xe},computed:{...(0,m.Se)(["isShowModalRemove","isShowModalDefault"])},methods:{...(0,m.nv)(["setLoading","setArticles","setCategoriesDefault"]),clearStore(){wt(),window.location.reload()}},async beforeCreate(){await bt();const e=await St();this.setArticles(vt),this.setCategoriesDefault(e),setTimeout((()=>{this.setLoading(!1)}),600)}},xt=Dt,At=(0,v.Z)(xt,a,o,!1,null,null,null),Pt=At.exports;const Mt={isShowModalRemove(e){return!!e.modalRemove},isShowModalDefault(e){return!!e.modalDefault},modalDefault(e){return e.modalDefault}};var It=Mt;const Lt={setLoading(e,t=!1){e.isLoading=t}};var Rt=Lt;const Nt=(e=!1)=>{const t=document.getElementById("body");t&&(e?t.classList.add("fixed"):t.classList.remove("fixed"))},Vt={showModalDefault(e,t){e.modalDefault={...t,isShow:!0},Nt(!0)},setModalState(e,t){e.modalDefault={...e.modalDefault,...t}},closeModalDefault(e){e.modalDefault=null,Nt(!1)},showModalRemove(e,t){e.modalRemove=t,Nt(!0)},hideModalRemove(e){e.modalRemove=null,Nt(!1)}};var qt=Vt;const Ft=(e,t)=>{if(e.id===t.parent)e.subCategories||(e.subCategories=[]),e.subCategories.push(t);else if(e.subCategories)for(let s of e.subCategories)Ft(s,t)},Zt=(e,t)=>{if(e.subCategories){let s=0;for(let i of e.subCategories){if(i.id===t.id)break;i.subCategories&&Zt(i,t),s++}e.subCategories.splice(s,1)}},Tt=e=>!e.name||e.name&&!e.name.trim()?{value:!1,options:[{key:"name",message:"Поле не должно быть пустое"}]}:{value:!0,options:[]};function Et(e){e.isLoading=!0,setTimeout((()=>{e.isLoading=!1,Nt()}),600)}const jt={addCategory(e){const t={id:(new Date).getTime(),name:e.modalDefault.category.name,articles:e.modalDefault.articleSelected.slice(),parent:e.modalDefault.category.parent||null},s=Tt(t);if(s.value){if(e.isValidModalItem=null,t.parent)for(let s of e.categories)Ft(s,t);else e.categories.unshift(t);e.modalDefault=null,Et(e),Ot(e.categories)}else e.isValidModalItem=[...s.options]},editCategory(e){const t={...e.modalDefault.category,articles:e.modalDefault.articleSelected.slice()},s=Tt(t);if(s.value){if(e.isValidModalItem=null,e.modalDefault.categoryIndex>=0)e.categories[e.modalDefault.categoryIndex]={...t};else{for(let s of e.categories)Zt(s,t);for(let s of e.categories)Ft(s,t)}e.modalDefault=null,Et(e),Ot(e.categories)}else e.isValidModalItem=[...s.options]},removeCategory(e,t){let s=0;for(let i of e.categories){if(i.id===t.category.id)break;Zt(i,t.category),s++}e.categories.splice(s,1),Et(e),Ot(e.categories)},setFilterArticles(e,t){e.filterArticles=t},setCategoriesDefault(e,t){e.categories=t}};var Bt=jt;function $t(e){e.isLoading=!0,setTimeout((()=>{e.isLoading=!1,Nt()}),600)}const zt={setArticles(e,t){e.articles=t},saveArticle(e){try{const t=e.modalDefault.selectedCategories.filter((e=>null===e.id));for(let a of t)a.id=(new Date).getTime(),e.categories.unshift(a),e.modalDefault.selectedCategories.push(a);const s=e.modalDefault.selectedCategories.map((e=>e.id)),i=e.articles.filter((t=>{if(e.modalDefault.articleId===t.id)return t}));for(let a of e.categories){let t=!1;a.articles||(a.articles=[]),a.articles=a.articles.filter((i=>i.id!==e.modalDefault.articleId?i:s.includes(a.id)?(t=!0,i):void 0)),!t&&s.includes(a.id)&&a.articles.push(i[0])}e.modalDefault=null,$t(e),Ot(e.categories)}catch(t){console.error(t)}}};var Ht=zt;const Wt={...Rt,...qt,...Bt,...Ht};var Gt=Wt;const Jt={setLoading({commit:e},t=!1){e("setLoading",t)}};var Ut=Jt;const Kt={showModalDefault({commit:e},t={}){e("showModalDefault",t)},closeModalDefault({commit:e}){e("closeModalDefault")},showModalRemove({commit:e},t){e("showModalRemove",t)},hideModalRemove({commit:e}){e("hideModalRemove")},setModalState({commit:e},t){e("setModalState",t)}};var Qt=Kt;const Xt={addCategory({commit:e}){e("addCategory")},editCategory({commit:e},t={}){e("editCategory",t)},removeCategory({commit:e},t){e("removeCategory",t)},setFilterArticles({commit:e},t){e("setFilterArticles",t)},setCategoriesDefault({commit:e},t){e("setCategoriesDefault",t)}};var Yt=Xt;const es={setArticles({commit:e},t=[]){e("setArticles",t)},saveArticle({commit:e},t){e("saveArticle",t)}};var ts=es;const ss={...Ut,...Qt,...Yt,...ts};var is=ss;i.ZP.use(m.ZP);const as={isLoading:!0,categories:[],modalRemove:null,articles:[],filterArticles:null,modalDefault:null,isValidModalItem:null};var os=new m.ZP.Store({state:as,mutations:Gt,getters:It,actions:is}),rs=s(3318),ns=s.n(rs);i.ZP.config.productionTip=!1,i.ZP.use(h()),i.ZP.use(ns()),new i.ZP({render:e=>e(Pt),store:os}).$mount("#app")}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,o){if(!i){var r=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],o=e[u][2];for(var n=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={826:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,r=i[0],n=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var u=l(s)}for(t&&t(i);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},i=self["webpackChunkmini_article_book"]=self["webpackChunkmini_article_book"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(2863)}));i=s.O(i)})();
//# sourceMappingURL=index.32fad69c.js.map